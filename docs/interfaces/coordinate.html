<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>angular-resizable-element documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	    <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">angular-resizable-element documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="../">angular-resizable-element documentation</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                    <a 
                                        
                                         href="../overview.html" 
                                         href="../overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./modules.html" >
                            <span class="fa fa-archive"></span>
                            <span>Modules</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-modules-links"
                            ></span>
                        </a>
                        <ul class="links collapse in"
                                id="xs-modules-links"
                            >
                                <li class="link">
                                    <a href="../modules/ResizableModule.html" >ResizableModule</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-code"></span>
                            <span>Directives</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-directives-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-directives-links"
                            >
                                <li class="link">
                                    <a href="../directives/Resizable.html" >Resizable</a>
                                </li>
                                <li class="link">
                                    <a href="../directives/ResizeHandle.html" >ResizeHandle</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-file-code-o"></span>
                            <span>Classes</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-classes-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-classes-links"
                            >
                                <li class="link">
                                    <a href="../classes/PointerEventListeners.html" >PointerEventListeners</a>
                                </li>
                        </ul>
                    </li>
            
            
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-info"></span>
                            <span>Interfaces</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-interfaces-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-interfaces-links"
                            >
                                <li class="link">
                                    <a href="../interfaces/BoundingRectangle.html" >BoundingRectangle</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Coordinate.html"  class="active" >Coordinate</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/Edges.html" >Edges</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ResizeCursors.html" >ResizeCursors</a>
                                </li>
                                <li class="link">
                                    <a href="../interfaces/ResizeEvent.html" >ResizeEvent</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                    </li>
            
            
                    <li class="divider"></li>
                    <li class="copyright">
                            Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                        <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                            </a>
                    </li>
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="../">angular-resizable-element documentation</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                           <a 
                                               
                                                href="../overview.html" 
                                                href="../overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./modules.html" >
                                   <span class="fa fa-archive"></span>
                                   <span>Modules</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#modules-links"
                                   ></span>
                               </a>
                               <ul class="links collapse in"
                                       id="modules-links"
                   >
                                       <li class="link">
                                           <a href="../modules/ResizableModule.html" >ResizableModule</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-code"></span>
                                   <span>Directives</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#directives-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="directives-links"
                   >
                                       <li class="link">
                                           <a href="../directives/Resizable.html" >Resizable</a>
                                       </li>
                                       <li class="link">
                                           <a href="../directives/ResizeHandle.html" >ResizeHandle</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-file-code-o"></span>
                                   <span>Classes</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#classes-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="classes-links"
                   >
                                       <li class="link">
                                           <a href="../classes/PointerEventListeners.html" >PointerEventListeners</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-info"></span>
                                   <span>Interfaces</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#interfaces-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="interfaces-links"
                   >
                                       <li class="link">
                                           <a href="../interfaces/BoundingRectangle.html" >BoundingRectangle</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Coordinate.html"  class="active" >Coordinate</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/Edges.html" >Edges</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ResizeCursors.html" >ResizeCursors</a>
                                       </li>
                                       <li class="link">
                                           <a href="../interfaces/ResizeEvent.html" >ResizeEvent</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                           </li>
                   
                   
                           <li class="divider"></li>
                           <li class="copyright">
                                   Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                               <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                                   </a>
                           </li>
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content interface">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Interfaces</li>
  <li>Coordinate</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
    <li class="active">
        <a href="#infos" id="infos-tab" role="tab" data-toggle="tab">Infos</a>
    </li>
    <li>
        <a href="#source" role="tab" id="source-tab" data-toggle="tab">Source</a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="infos">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/resizable.directive.ts</code>
        </p>





            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <b>x</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>x:     <code>number</code>
</bcode>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>number</code>

                                        </td>
                                    </tr>



                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <b>y</b>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>y:     <code>number</code>
</bcode>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>number</code>

                                        </td>
                                    </tr>



                        </tbody>
                    </table>
            </section>
    </div>
    <div class="tab-pane fade tab-source-code" id="source">
        <pre><code class="hljs javascript">import {
  Directive,
  Renderer2,
  ElementRef,
  OnInit,
  AfterViewInit,
  Output,
  Input,
  EventEmitter,
  ContentChildren,
  QueryList,
  OnDestroy,
  NgZone
} from &#x27;@angular/core&#x27;;
import {Subject} from &#x27;rxjs/Subject&#x27;;
import {Observable} from &#x27;rxjs/Observable&#x27;;
import {Observer} from &#x27;rxjs/Observer&#x27;;
import {merge} from &#x27;rxjs/observable/merge&#x27;;
import {interval} from &#x27;rxjs/observable/interval&#x27;;
import &#x27;rxjs/add/operator/map&#x27;;
import &#x27;rxjs/add/operator/mergeMap&#x27;;
import &#x27;rxjs/add/operator/takeUntil&#x27;;
import &#x27;rxjs/add/operator/filter&#x27;;
import &#x27;rxjs/add/operator/pairwise&#x27;;
import &#x27;rxjs/add/operator/take&#x27;;
import &#x27;rxjs/add/operator/throttle&#x27;;
import &#x27;rxjs/add/operator/share&#x27;;
import {ResizeHandle} from &#x27;./resizeHandle.directive&#x27;;
import {Edges} from &#x27;./interfaces/edges.interface&#x27;;
import {BoundingRectangle} from &#x27;./interfaces/boundingRectangle.interface&#x27;;

interface PointerEventCoordinate {
  clientX: number;
  clientY: number;
  event: MouseEvent | TouchEvent;
}

class PointerEventListeners {

  public pointerDown: Observable&lt;PointerEventCoordinate&gt;;

  public pointerMove: Observable&lt;PointerEventCoordinate&gt;;

  public pointerUp: Observable&lt;PointerEventCoordinate&gt;;

  private static instance: PointerEventListeners; // tslint:disable-line

  public static getInstance(renderer: Renderer2, zone: NgZone): PointerEventListeners {
    if (!PointerEventListeners.instance) {
      PointerEventListeners.instance &#x3D; new PointerEventListeners(renderer, zone);
    }
    return PointerEventListeners.instance;
  }

  constructor(renderer: Renderer2, zone: NgZone) {

    zone.runOutsideAngular(() &#x3D;&gt; {

      this.pointerDown &#x3D; new Observable((observer: Observer&lt;PointerEventCoordinate&gt;) &#x3D;&gt; {

        const unsubscribeMouseDown: Function &#x3D; renderer.listen(&#x27;document&#x27;, &#x27;mousedown&#x27;, (event: MouseEvent) &#x3D;&gt; {
          observer.next({clientX: event.clientX, clientY: event.clientY, event});
        });

        const unsubscribeTouchStart: Function &#x3D; renderer.listen(&#x27;document&#x27;, &#x27;touchstart&#x27;, (event: TouchEvent) &#x3D;&gt; {
          observer.next({clientX: event.touches[0].clientX, clientY: event.touches[0].clientY, event});
        });

        return () &#x3D;&gt; {
          unsubscribeMouseDown();
          unsubscribeTouchStart();
        };

      }).share();

      this.pointerMove &#x3D; new Observable((observer: Observer&lt;PointerEventCoordinate&gt;) &#x3D;&gt; {

        const unsubscribeMouseMove: Function &#x3D; renderer.listen(&#x27;document&#x27;, &#x27;mousemove&#x27;, (event: MouseEvent) &#x3D;&gt; {
          observer.next({clientX: event.clientX, clientY: event.clientY, event});
        });

        const unsubscribeTouchMove: Function &#x3D; renderer.listen(&#x27;document&#x27;, &#x27;touchmove&#x27;, (event: TouchEvent) &#x3D;&gt; {
          observer.next({clientX: event.targetTouches[0].clientX, clientY: event.targetTouches[0].clientY, event});
        });

        return () &#x3D;&gt; {
          unsubscribeMouseMove();
          unsubscribeTouchMove();
        };

      }).share();

      this.pointerUp &#x3D; new Observable((observer: Observer&lt;PointerEventCoordinate&gt;) &#x3D;&gt; {

        const unsubscribeMouseUp: Function &#x3D; renderer.listen(&#x27;document&#x27;, &#x27;mouseup&#x27;, (event: MouseEvent) &#x3D;&gt; {
          observer.next({clientX: event.clientX, clientY: event.clientY, event});
        });

        const unsubscribeTouchEnd: Function &#x3D; renderer.listen(&#x27;document&#x27;, &#x27;touchend&#x27;, (event: TouchEvent) &#x3D;&gt; {
          observer.next({clientX: event.changedTouches[0].clientX, clientY: event.changedTouches[0].clientY, event});
        });

        const unsubscribeTouchCancel: Function &#x3D; renderer.listen(&#x27;document&#x27;, &#x27;touchcancel&#x27;, (event: TouchEvent) &#x3D;&gt; {
          observer.next({clientX: event.changedTouches[0].clientX, clientY: event.changedTouches[0].clientY, event});
        });

        return () &#x3D;&gt; {
          unsubscribeMouseUp();
          unsubscribeTouchEnd();
          unsubscribeTouchCancel();
        };

      }).share();

    });

  }

}

interface Coordinate {
  x: number;
  y: number;
}

function isNumberCloseTo(value1: number, value2: number, precision: number &#x3D; 3): boolean {
  const diff: number &#x3D; Math.abs(value1 - value2);
  return diff &lt; precision;
}

function getNewBoundingRectangle(startingRect: BoundingRectangle, edges: Edges, clientX: number, clientY: number): BoundingRectangle {

  const newBoundingRect: BoundingRectangle &#x3D; {
    top: startingRect.top,
    bottom: startingRect.bottom,
    left: startingRect.left,
    right: startingRect.right
  };

  if (edges.top) {
    newBoundingRect.top +&#x3D; clientY;
  }
  if (edges.bottom) {
    newBoundingRect.bottom +&#x3D; clientY;
  }
  if (edges.left) {
    newBoundingRect.left +&#x3D; clientX;
  }
  if (edges.right) {
    newBoundingRect.right +&#x3D; clientX;
  }
  newBoundingRect.height &#x3D; newBoundingRect.bottom - newBoundingRect.top;
  newBoundingRect.width &#x3D; newBoundingRect.right - newBoundingRect.left;

  return newBoundingRect;

}

function getElementRect(element: ElementRef, ghostElementPositioning: string): BoundingRectangle {
  if (ghostElementPositioning &#x3D;&#x3D;&#x3D; &#x27;absolute&#x27;) {
    return {
      top: element.nativeElement.offsetTop,
      bottom: element.nativeElement.offsetHeight + element.nativeElement.offsetTop,
      left: element.nativeElement.offsetLeft,
      right: element.nativeElement.offsetWidth + element.nativeElement.offsetLeft
    };
  } else {
    const boundingRect: BoundingRectangle &#x3D; element.nativeElement.getBoundingClientRect();
    return {
      top: boundingRect.top,
      bottom: boundingRect.bottom,
      left: boundingRect.left,
      right: boundingRect.right
    };
  }
}

function isWithinBoundingY({clientY, rect}: {clientY: number, rect: ClientRect}): boolean {
  return clientY &gt;&#x3D; rect.top &amp;&amp; clientY &lt;&#x3D; rect.bottom;
}

function isWithinBoundingX({clientX, rect}: {clientX: number, rect: ClientRect}): boolean {
  return clientX &gt;&#x3D; rect.left &amp;&amp; clientX &lt;&#x3D; rect.right;
}

function getResizeEdges(
  {clientX, clientY, elm, allowedEdges, cursorPrecision}:
    {clientX: number, clientY: number, elm: ElementRef, allowedEdges: Edges, cursorPrecision: number}): Edges {
  const elmPosition: ClientRect &#x3D; elm.nativeElement.getBoundingClientRect();
  const edges: Edges &#x3D; {};

  if (
    allowedEdges.left &amp;&amp;
    isNumberCloseTo(clientX, elmPosition.left, cursorPrecision) &amp;&amp;
    isWithinBoundingY({clientY, rect: elmPosition})
  ) {
    edges.left &#x3D; true;
  }

  if (
    allowedEdges.right &amp;&amp;
    isNumberCloseTo(clientX, elmPosition.right, cursorPrecision) &amp;&amp;
    isWithinBoundingY({clientY, rect: elmPosition})
  ) {
    edges.right &#x3D; true;
  }

  if (
    allowedEdges.top &amp;&amp;
    isNumberCloseTo(clientY, elmPosition.top, cursorPrecision) &amp;&amp;
    isWithinBoundingX({clientX, rect: elmPosition})
  ) {
    edges.top &#x3D; true;
  }

  if (
    allowedEdges.bottom &amp;&amp;
    isNumberCloseTo(clientY, elmPosition.bottom, cursorPrecision) &amp;&amp;
    isWithinBoundingX({clientX, rect: elmPosition})
  ) {
    edges.bottom &#x3D; true;
  }

  return edges;
}

export interface ResizeCursors {
  topLeft: string;
  topRight: string;
  bottomLeft: string;
  bottomRight: string;
  leftOrRight: string;
  topOrBottom: string;
}

const DEFAULT_RESIZE_CURSORS: ResizeCursors &#x3D; Object.freeze({
  topLeft: &#x27;nw-resize&#x27;,
  topRight: &#x27;ne-resize&#x27;,
  bottomLeft: &#x27;sw-resize&#x27;,
  bottomRight: &#x27;se-resize&#x27;,
  leftOrRight: &#x27;ew-resize&#x27;,
  topOrBottom: &#x27;ns-resize&#x27;
});

function getResizeCursor(edges: Edges, cursors: ResizeCursors): string {
  if (edges.left &amp;&amp; edges.top) {
    return cursors.topLeft;
  } else if (edges.right &amp;&amp; edges.top) {
    return cursors.topRight;
  } else if (edges.left &amp;&amp; edges.bottom) {
    return cursors.bottomLeft;
  } else if (edges.right &amp;&amp; edges.bottom) {
    return cursors.bottomRight;
  } else if (edges.left || edges.right) {
    return cursors.leftOrRight;
  } else if (edges.top || edges.bottom) {
    return cursors.topOrBottom;
  } else {
    return null;
  }
}

function getEdgesDiff(
  {edges, initialRectangle, newRectangle}: {edges: Edges, initialRectangle: BoundingRectangle, newRectangle: BoundingRectangle}): Edges {

  const edgesDiff: Edges &#x3D; {};
  Object.keys(edges).forEach((edge: string) &#x3D;&gt; {
    edgesDiff[edge] &#x3D; newRectangle[edge] - initialRectangle[edge];
  });
  return edgesDiff;

}

const RESIZE_ACTIVE_CLASS: string &#x3D; &#x27;resize-active&#x27;;
const RESIZE_LEFT_HOVER_CLASS: string &#x3D; &#x27;resize-left-hover&#x27;;
const RESIZE_RIGHT_HOVER_CLASS: string &#x3D; &#x27;resize-right-hover&#x27;;
const RESIZE_TOP_HOVER_CLASS: string &#x3D; &#x27;resize-top-hover&#x27;;
const RESIZE_BOTTOM_HOVER_CLASS: string &#x3D; &#x27;resize-bottom-hover&#x27;;

export const MOUSE_MOVE_THROTTLE_MS: number &#x3D; 50;

/**
 * Place this on an element to make it resizable
 *
 * For example
 *
 * &#x60;&#x60;&#x60;
 * &amp;lt;div mwlResizable [resizeEdges]&#x3D;&quot;{bottom: true, right: true, top: true, left: true}&quot; [enableGhostResize]&#x3D;&quot;true&quot;&amp;gt;&amp;lt;/div&amp;gt;
 * &#x60;&#x60;&#x60;
 */
@Directive({
  selector: &#x27;[mwlResizable]&#x27;
})
export class Resizable implements OnInit, OnDestroy, AfterViewInit {

  /**
   * A function that will be called before each resize event. Return &#x60;true&#x60; to allow the resize event to propagate or &#x60;false&#x60; to cancel it
   */
  @Input() validateResize: Function;

  /**
   * The edges that an element can be resized from. Pass an object like &#x60;{top: true, bottom: false}&#x60;. By default no edges can be resized.
   */
  @Input() resizeEdges: Edges &#x3D; {};

  /**
   * Set to &#x60;true&#x60; to enable a temporary resizing effect of the element in between the &#x60;resizeStart&#x60; and &#x60;resizeEnd&#x60; events.
   */
  @Input() enableGhostResize: boolean &#x3D; false;

  /**
   * A snap grid that resize events will be locked to.
   *
   * e.g. to only allow the element to be resized every 10px set it to &#x60;{left: 10, right: 10}&#x60;
   */
  @Input() resizeSnapGrid: Edges &#x3D; {};

  /**
   * The mouse cursors that will be set on the resize edges
   */
  @Input() resizeCursors: ResizeCursors &#x3D; DEFAULT_RESIZE_CURSORS;

  /**
   * Mouse over thickness to active cursor.
   */
  @Input() resizeCursorPrecision: number &#x3D; 3;

  /**
   * Define the positioning of the ghost element (can be fixed or absolute)
   */
  @Input() ghostElementPositioning: &#x27;fixed&#x27; | &#x27;absolute&#x27; &#x3D; &#x27;fixed&#x27;;

  /**
   * Called when the mouse is pressed and a resize event is about to begin. &#x60;$event&#x60; is a &#x60;ResizeEvent&#x60; object.
   */
  @Output() resizeStart: EventEmitter&lt;Object&gt; &#x3D; new EventEmitter();

  /**
   * Called as the mouse is dragged after a resize event has begun. &#x60;$event&#x60; is a &#x60;ResizeEvent&#x60; object.
   */
  @Output() resizing: EventEmitter&lt;Object&gt; &#x3D; new EventEmitter();

  /**
   * Called after the mouse is released after a resize event. &#x60;$event&#x60; is a &#x60;ResizeEvent&#x60; object.
   */
  @Output() resizeEnd: EventEmitter&lt;Object&gt; &#x3D; new EventEmitter();

  /**
   * @private
   */
  public mouseup: Subject&lt;any&gt; &#x3D; new Subject();

  /**
   * @private
   */
  public mousedown: Subject&lt;any&gt; &#x3D; new Subject();

  /**
   * @private
   */
  public mousemove: Subject&lt;any&gt; &#x3D; new Subject();

  /**
   * @private
   */
  @ContentChildren(ResizeHandle) resizeHandles: QueryList&lt;ResizeHandle&gt;;

  private pointerEventListeners: PointerEventListeners;

  private pointerEventListenerSubscriptions: any &#x3D; {};

  /**
   * @private
   */
  constructor(
    private renderer: Renderer2,
    public elm: ElementRef,
    private zone: NgZone
  ) {
    this.pointerEventListeners &#x3D; PointerEventListeners.getInstance(renderer, zone);
  }

  /**
   * @private
   */
  ngOnInit(): void {

    // TODO - use some fancy Observable.merge&#x27;s for this
    this.pointerEventListenerSubscriptions.pointerDown &#x3D; this.pointerEventListeners.pointerDown.subscribe(({clientX, clientY}) &#x3D;&gt; {
      this.mousedown.next({clientX, clientY});
    });

    this.pointerEventListenerSubscriptions.pointerMove &#x3D; this.pointerEventListeners.pointerMove.subscribe(({clientX, clientY, event}) &#x3D;&gt; {
      this.mousemove.next({clientX, clientY, event});
    });

    this.pointerEventListenerSubscriptions.pointerUp &#x3D;  this.pointerEventListeners.pointerUp.subscribe(({clientX, clientY}) &#x3D;&gt; {
      this.mouseup.next({clientX, clientY});
    });

    let currentResize: {
      edges: Edges,
      startingRect: BoundingRectangle,
      currentRect: BoundingRectangle,
      clonedNode?: HTMLElement
    };

    const removeGhostElement: Function &#x3D; (): void &#x3D;&gt; {
      if (currentResize.clonedNode) {
        this.elm.nativeElement.parentElement.removeChild(currentResize.clonedNode);
        this.renderer.setStyle(this.elm.nativeElement, &#x27;visibility&#x27;, &#x27;inherit&#x27;);
      }
    };

    const mouseMove: Observable&lt;any&gt; &#x3D; this.mousemove.share();

    mouseMove
      .filter(() &#x3D;&gt; !!currentResize)
      .subscribe(({event}) &#x3D;&gt; {
        event.preventDefault();
      });

    mouseMove.throttle(val &#x3D;&gt; interval(MOUSE_MOVE_THROTTLE_MS)).subscribe(({clientX, clientY}) &#x3D;&gt; {

      const resizeEdges: Edges &#x3D; getResizeEdges({
        clientX, clientY,
        elm: this.elm,
        allowedEdges: this.resizeEdges,
        cursorPrecision: this.resizeCursorPrecision
      });
      const resizeCursors: ResizeCursors &#x3D; Object.assign({}, DEFAULT_RESIZE_CURSORS, this.resizeCursors);
      const cursor: string &#x3D; currentResize ? null : getResizeCursor(resizeEdges, resizeCursors);

      this.renderer.setStyle(this.elm.nativeElement, &#x27;cursor&#x27;, cursor);
      this.setElementClass(this.elm, RESIZE_ACTIVE_CLASS, !!currentResize);
      this.setElementClass(this.elm, RESIZE_LEFT_HOVER_CLASS, resizeEdges.left &#x3D;&#x3D;&#x3D; true);
      this.setElementClass(this.elm, RESIZE_RIGHT_HOVER_CLASS, resizeEdges.right &#x3D;&#x3D;&#x3D; true);
      this.setElementClass(this.elm, RESIZE_TOP_HOVER_CLASS, resizeEdges.top &#x3D;&#x3D;&#x3D; true);
      this.setElementClass(this.elm, RESIZE_BOTTOM_HOVER_CLASS, resizeEdges.bottom &#x3D;&#x3D;&#x3D; true);

    });

    const mousedrag: Observable&lt;any&gt; &#x3D; this.mousedown.flatMap(startCoords &#x3D;&gt; {

      const getDiff: Function &#x3D; moveCoords &#x3D;&gt; {
        return {
          clientX: moveCoords.clientX - startCoords.clientX,
          clientY: moveCoords.clientY - startCoords.clientY
        };
      };

      const getSnapGrid: Function &#x3D; () &#x3D;&gt; {
        const snapGrid: Coordinate &#x3D; {x: 1, y: 1};

        if (currentResize) {
          if (this.resizeSnapGrid.left &amp;&amp; currentResize.edges.left) {
            snapGrid.x &#x3D; +this.resizeSnapGrid.left;
          } else if (this.resizeSnapGrid.right &amp;&amp; currentResize.edges.right) {
            snapGrid.x &#x3D; +this.resizeSnapGrid.right;
          }

          if (this.resizeSnapGrid.top &amp;&amp; currentResize.edges.top) {
            snapGrid.y &#x3D; +this.resizeSnapGrid.top;
          } else if (this.resizeSnapGrid.bottom &amp;&amp; currentResize.edges.bottom) {
            snapGrid.y &#x3D; +this.resizeSnapGrid.bottom;
          }
        }

        return snapGrid;
      };

      const getGrid: Function &#x3D; (coords, snapGrid) &#x3D;&gt; {
        return {
          x: Math.ceil(coords.clientX / snapGrid.x),
          y: Math.ceil(coords.clientY / snapGrid.y)
        };
      };

      return merge(
        mouseMove.take(1).map(coords &#x3D;&gt; [, coords]),
        mouseMove.pairwise()
      ).map(([previousCoords, newCoords]) &#x3D;&gt; {
        return [previousCoords ? getDiff(previousCoords) : previousCoords, getDiff(newCoords)];
      }).filter(([previousCoords, newCoords]) &#x3D;&gt; {

        if (!previousCoords) {
          return true;
        }

        const snapGrid: Coordinate &#x3D; getSnapGrid();
        const previousGrid: Coordinate &#x3D; getGrid(previousCoords, snapGrid);
        const newGrid: Coordinate &#x3D; getGrid(newCoords, snapGrid);

        return (previousGrid.x !&#x3D;&#x3D; newGrid.x || previousGrid.y !&#x3D;&#x3D; newGrid.y);

      }).map(([, newCoords]) &#x3D;&gt; {
        const snapGrid: Coordinate &#x3D; getSnapGrid();
        return {
          clientX: Math.round(newCoords.clientX / snapGrid.x) * snapGrid.x,
          clientY: Math.round(newCoords.clientY / snapGrid.y) * snapGrid.y
        };
      }).takeUntil(merge(this.mouseup, this.mousedown));

    }).filter(() &#x3D;&gt; !!currentResize);

    mousedrag.map(({clientX, clientY}) &#x3D;&gt; {
      return getNewBoundingRectangle(currentResize.startingRect, currentResize.edges, clientX, clientY);
    }).filter((newBoundingRect: BoundingRectangle) &#x3D;&gt; {
      return newBoundingRect.height &gt; 0 &amp;&amp; newBoundingRect.width &gt; 0;
    }).filter((newBoundingRect: BoundingRectangle) &#x3D;&gt; {
      return this.validateResize ? this.validateResize({
        rectangle: newBoundingRect,
        edges: getEdgesDiff({
          edges: currentResize.edges,
          initialRectangle: currentResize.startingRect,
          newRectangle: newBoundingRect
        })
      }) : true;
    }).subscribe((newBoundingRect: BoundingRectangle) &#x3D;&gt; {

      if (currentResize.clonedNode) {
        this.renderer.setStyle(currentResize.clonedNode, &#x27;height&#x27;, &#x60;${newBoundingRect.height}px&#x60;);
        this.renderer.setStyle(currentResize.clonedNode, &#x27;width&#x27;, &#x60;${newBoundingRect.width}px&#x60;);
        this.renderer.setStyle(currentResize.clonedNode, &#x27;top&#x27;, &#x60;${newBoundingRect.top}px&#x60;);
        this.renderer.setStyle(currentResize.clonedNode, &#x27;left&#x27;, &#x60;${newBoundingRect.left}px&#x60;);
      }

      this.zone.run(() &#x3D;&gt; {
        this.resizing.emit({
          edges: getEdgesDiff({
            edges: currentResize.edges,
            initialRectangle: currentResize.startingRect,
            newRectangle: newBoundingRect
          }),
          rectangle: newBoundingRect
        });
      });

      currentResize.currentRect &#x3D; newBoundingRect;

    });

    this.mousedown.map(({clientX, clientY, edges}) &#x3D;&gt; {
      return edges || getResizeEdges({
        clientX, clientY,
        elm: this.elm,
        allowedEdges: this.resizeEdges,
        cursorPrecision: this.resizeCursorPrecision
      });
    }).filter((edges: Edges) &#x3D;&gt; {
      return Object.keys(edges).length &gt; 0;
    }).subscribe((edges: Edges) &#x3D;&gt; {
      if (currentResize) {
        removeGhostElement();
      }
      const startingRect: BoundingRectangle &#x3D; getElementRect(this.elm, this.ghostElementPositioning);
      currentResize &#x3D; {
        edges,
        startingRect,
        currentRect: startingRect
      };
      if (this.enableGhostResize) {
        currentResize.clonedNode &#x3D; this.elm.nativeElement.cloneNode(true);
        const resizeCursors: ResizeCursors &#x3D; Object.assign({}, DEFAULT_RESIZE_CURSORS, this.resizeCursors);
        this.elm.nativeElement.parentElement.appendChild(currentResize.clonedNode);
        this.renderer.setStyle(this.elm.nativeElement, &#x27;visibility&#x27;, &#x27;hidden&#x27;);
        this.renderer.setStyle(currentResize.clonedNode, &#x27;position&#x27;, this.ghostElementPositioning);
        this.renderer.setStyle(currentResize.clonedNode, &#x27;left&#x27;, &#x60;${currentResize.startingRect.left}px&#x60;);
        this.renderer.setStyle(currentResize.clonedNode, &#x27;top&#x27;, &#x60;${currentResize.startingRect.top}px&#x60;);
        this.renderer.setStyle(currentResize.clonedNode, &#x27;height&#x27;, &#x60;${currentResize.startingRect.height}px&#x60;);
        this.renderer.setStyle(currentResize.clonedNode, &#x27;width&#x27;, &#x60;${currentResize.startingRect.width}px&#x60;);
        this.renderer.setStyle(currentResize.clonedNode, &#x27;cursor&#x27;, getResizeCursor(currentResize.edges, resizeCursors));
      }
      this.zone.run(() &#x3D;&gt; {
        this.resizeStart.emit({
          edges: getEdgesDiff({edges, initialRectangle: startingRect, newRectangle: startingRect}),
          rectangle: getNewBoundingRectangle(startingRect, {}, 0, 0)
        });
      });
    });

    this.mouseup.subscribe(() &#x3D;&gt; {
      if (currentResize) {
        this.renderer.removeClass(this.elm.nativeElement, RESIZE_ACTIVE_CLASS);
        this.zone.run(() &#x3D;&gt; {
          this.resizeEnd.emit({
            edges: getEdgesDiff({
              edges: currentResize.edges,
              initialRectangle: currentResize.startingRect,
              newRectangle: currentResize.currentRect
            }),
            rectangle: currentResize.currentRect
          });
        });
        removeGhostElement();
        currentResize &#x3D; null;
      }
    });

  }

  /**
   * @private
   */
  ngAfterViewInit(): void {
    this.resizeHandles.forEach((handle: ResizeHandle) &#x3D;&gt; {
      handle.resizable &#x3D; this;
    });
  }

  /**
   * @private
   */
  ngOnDestroy(): void {
    this.mousedown.complete();
    this.mouseup.complete();
    this.mousemove.complete();
    this.pointerEventListenerSubscriptions.pointerDown.unsubscribe();
    this.pointerEventListenerSubscriptions.pointerMove.unsubscribe();
    this.pointerEventListenerSubscriptions.pointerUp.unsubscribe();
  }

  private setElementClass(elm: ElementRef, name: string, add: boolean): void {
    if (add) {
      this.renderer.addClass(elm.nativeElement, name);
    } else {
      this.renderer.removeClass(elm.nativeElement, name);
    }
  }

}
</code></pre>
    </div>
</div>




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/menu.js"></script>
       <script src="../js/libs/highlight.pack.js"></script>
       <script src="../js/libs/highlightjs-line-numbers.min.js"></script>
       <script src="../js/search/search_index.js"></script>
       <script>
            document.addEventListener('DOMContentLoaded', function() {
                hljs.initHighlightingOnLoad();
                hljs.initLineNumbersOnLoad();
            });
       </script>

    </body>
</html>
